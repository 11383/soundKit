<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>SoundKit</title>

    <link rel="stylesheet" href="demo.css">
    <link href="https://fonts.googleapis.com/css?family=Oswald:200" rel="stylesheet">
    
    <script type="module">
        import { Player, Metronome, Render } from '../../src/SoundKit.js'
        import { drum, test } from './presets/presets.js'

        const player = new Player()
        const metronome = new Metronome({ beats: 4, tempo: 120 })

        const render = new Render(document.body, {
            player,
            metronome
        })

        window.render = render


        player.addChannel('drum')
        player.addChannel('drum2')

        
        player.addPreset('test', test)
        player.addPreset('drum', drum)

        const e = ['#metronome-tempo', '#metronome-beats']

        e.forEach( selector => {
            const element = document.querySelector(selector)

            element.addEventListener('focusin', () => metronome.play() )
            element.addEventListener('focusout', () => metronome.stop() )
            element.addEventListener('change', (e) => {
                metronome.stop()
                metronome.setTempo(element.value)
                metronome.play()
            })
        })
    </script>

    <script>
        // function openFullscreen() {
        //     var elem = document.documentElement;
        //     console.log('openFull', elem)
        // if (elem.requestFullscreen) {
        //     elem.requestFullscreen();
        // } else if (elem.mozRequestFullScreen) { /* Firefox */
        //     elem.mozRequestFullScreen();
        // } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
        //     elem.webkitRequestFullscreen();
        // } else if (elem.msRequestFullscreen) { /* IE/Edge */
        //     elem.msRequestFullscreen();
        // }
        // }
    </script>
</head>
<body>
    <div class="l-content">
        <div class="metre-counter"></div>

        <!-- <div class="btn" onclick="openFullscreen()">Fullscr</div> -->
    
        <div class="l-aside">
            <span class="title">Channels</span>
            <div class="h-scroll">
                <div class="h-scroll__container">
                    <div class="grid grid--horizontal soundKit-channels demo-channels">
                    </div>
                </div>  
            </div>
        </div>
    
        <div class="l-main">
            <span class="title">Sounds:</span>
            <span class="soundKit-preset"></span>
            <div class="grid soundKit-pad demo-pad">
            </div>
        </div>

    </div>
    
    <div class="toolbar soundKit-toolbar">
        
        <div class="toolbar__item">
            <div class="icon icon-play" onclick="render.play()"></div>
        </div>
        
        <div class="toolbar__item">
            <div class="icon icon-stop" onclick="render.stop()"></div>
        </div>

        <div class="toolbar__item">
            <div class="icon icon-record" onclick="render.record()"></div>
        </div>

        <div class="toolbar__item" style="margin: 0 20px">
            
            <input type="number" value="120" id="metronome-tempo">
            <div class="icon icon-metronome"></div>
            <input type="number" value="4" id="metronome-beats">
        </div>
    </div>
</body>
</html>